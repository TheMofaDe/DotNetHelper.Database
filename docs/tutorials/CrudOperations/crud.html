<!DOCTYPE html>
<html>
<head>
    <title>CRUD Operations</title>
</head>
<body>

    <h2 id="crud-operations">CRUD Operations</h2>
<p>This article will explain everyting related to inserting objects into a database using this library.</p>
<p>*Lets go over some prerequisites</p>
<p><em>Employee Table In Database</em></p>
<pre><code class="language-sql">CREATE TABLE [master].[dbo].[Employee](
	[IdentityField] [int] NOT NULL IDENTITY (1,1) PRIMARY KEY,
	[FirstName] [varchar](400) NOT NULL,
	[LastName] [varchar](400) NOT NULL,
	[DOB] DateTime NOT NULL,
	[CreatedAt] DateTime NULL DEFAULT GETDATE(),
	[FavoriteColor] [varchar](400)  NULL
);
</code></pre>
<p><em>Employee Class In .NET Project</em></p>
<pre><code class="language-csharp"> public class Employee {
        [DatabaseGenerated(DatabaseGeneratedOption.Identity)] // Tells the library this column is a identity column
        [Key] // Tells the library this column is a primary key
        public int IdentityField { get; set; }

        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string FavoriteColor { get; set; }
        public DateTime? CreatedAt { get; set; }

        [NotMapped]// Tells the library to ignore this property its not part of the database
        public string FullName =&gt; FirstName + &quot; &quot; + LastName;

        [SqlColumn(MapTo = &quot;DOB&quot;)] // Tells the library this property is actually name DOB in the database table
        public DateTime DateOfBirth { get; set; }
}
</code></pre>
<h2 id="getting-started-with-inserts">Getting Started With Inserts</h2>
<p>Now I will show you how to insert an a employee object into your database</p>
<p>The first thing you will need to do is intialize a new instance of <strong>DatabaseAccess</strong><br />
To initialize a new instance of <strong>DatabaseAccess</strong> you must specify a type of DBConnection your database support.</p>
<pre><code class="language-csharp">var dbAccess = new DatabaseAccess&lt;SqlConnection&gt;(&quot;ConnectionString&quot;);
</code></pre>
<p>For this example im going to use the common <em>SqlConnection</em> type as showned above.<br />
If your wondering why this is required. It is because this library supports multiple database
and not every database use the same syntax. So the DBConnection that you use will control how sql is generated.</p>
<pre><code class="language-csharp">var employee = new Employee(); // create an new employee
    employee.FirstName = &quot;John&quot;;
    employee.LastName = &quot;Doe&quot;;
    employee.DateOfBirth = DateTime.Now;
               
var recordAffected = dbAccess.Execute(employee, ActionType.Insert); // ActionType is a enum of Insert,Update,Delete,Upsert
</code></pre>
<p><strong>That was simply and east</strong></p>
<br/>
<h2 id="getting-started-with-deletes">Getting Started With Deletes</h2>
<p>This section assumes you read the above section. Now that we added an employee we need to remove him because we don't like him
here how you would go about doing such a thing</p>
<pre><code class="language-csharp"> var employees = dbAccess.Get&lt;Employee&gt;(); // returns a list of T which in this cause is a list of Employee
</code></pre>
<p>Now our employees object contains one employee in it. Lets delete him</p>
<pre><code class="language-csharp">var recordAffected = dbAccess.Execute(employees.First(), ActionType.Delete); 
</code></pre>
<p><strong>That was simply and east</strong></p>
<br/>
<h2 id="getting-started-with-upserts">Getting Started With Upserts</h2>
<p>This section assumes you read the above section.<br />
Oops maybe deleting that employee was a mistake lets we add him using an upsert</p>
<pre><code class="language-csharp">var recordAffected = dbAccess.Execute(employee, ActionType.Upsert); 
</code></pre>
<p><strong>That was simply and east</strong></p>
<h2 id="getting-started-with-update">Getting Started With Update</h2>
<p>This section assumes you read the above section.<br />
Turns out our test employee John real name isn't John its Patrick so lets update him</p>
<pre><code class="language-csharp">employee.FirstName = &quot;Patrick&quot;;
var recordAffected = dbAccess.Execute(employee, ActionType.Update); 
</code></pre>
<p><strong>That was simply and east</strong></p>


</body>
</html>